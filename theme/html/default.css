/* Do not show bullet points for TOC entries: */
#toc-sidebar ::marker
{ content: none; }
/* Use a sans-serif font: */
body {
  font-family: sans-serif;
}
/* Don't show <span>s in TOC by default
   except if it's a section number. */
#toc-sidebar a span
{
  display: none;
}
#toc-sidebar a span.toc-section-number
{
  display: inline;
}

/* toc-sidebar needs some top-padding, otherwise the TOC starts too close to
   the top bar. */
#toc-sidebar
{
  padding-top: 2em;
}

/* No padding is needed on TOC top-level ul. Remove it so that we don't loose
   too much screen real-estate. */
#toc-sidebar > ul {
  padding: 0;
}

/* only show TOC 2 levels deep: */
#toc-sidebar ul ul ul
{
  display: none;
}

/* Remove underline from links in TOC.
   Also make font size a bit smaller than the default content size. */
#toc-sidebar a
{
  text-decoration: none;
  font-size: 0.875em;
}

/* Hide header link by default
   except on mouse hover, or
   click/tap (for mobile users) */
h1 a, h2 a, h3 a {
  visibility: hidden;
  font-size: 85%;
}
h1:hover a, h1:active a,
h2:hover a, h2:active a,
h3:hover a, h2:active a {
  visibility: visible;
}

/* Set layout and size for top-level divs:
  +-------------------------------------------------------+
  | body                                                  |
  |+-----------------------------------------------------+|
  ||   #top-bar                                          ||
  |+-----------------------------------------------------+|
  ||   #all-below-top-bar                                ||
  ||+------------+--------------------------------------+||
  |||#toc-sidebar|+------------------+-----------------+|||
  |||            ||#main-content-col | sidenotescol    ||||
  |||            ||                  |                 ||||
  |||            |+------------------+-----------------+|||
  ||+------------+--------------------------------------+||
  |+-------------+---------------------------------------+|
  +-------------------------------------------------------+

   We're not using bootstrap for this top-level
   layout (body, all-below-top-bar) because
   it seems it does not support the necessary
   "calc" height functionality needed for
   #all-below-top-bar.

   Within those containers, we do use bootstrap.
*/

/* bootstrap breakpoints:
   xs < 576px <= sm < 768px <= md < 992px <= lg < 1200px <= xl < 1400px <= xxl

   On the different screen sizes we make the different content columns visible
   by default as follows:

   * xs and sm: only the main content column. sidenotes are shown inline.
   * md and lg: only the main content column and the sidenotes column are shown
     max-width(main)=min(75% width, md); max-width(sidenotes)=min(25% width, xs?)
   * xl, xxl: toc, main content and the sidenotes are shown.
     max-width(main)=min(50% width, md);
     max-width(sidenotes) and max-width(toc)=min(25% width, xs?)
*/

body {
  display: flex;
  flex-direction: column;
  height: 100vh;
}
#all-below-top-bar {
  height: calc(100vh - 56px);
}

/* Set maximum width so that lines do not get too long.
   Lines of text that are too long are harder to read... */

.sidenote {
    display: inline; /* keep paragraphs with sidenote from breaking in 2. */
    float: right;    /* Show side notes on right hand side margin. */

    /* Limit the width of sidenotes on really large display to 376px. Otherwise
       allow up to 23% of the screen width to be used by the sidenotes. */
    width: calc(min(23vw, 376px));
    /* pull the side note, next to the text, not in the main text. */
    margin-right: calc(max(-25vw, -400px));
    font-size: 80%;  /* Make the font size of side notes somewhat smaller. */
}

/* xs and sm breakpoints: */
@media (max-width: 767px) {
  #toc-sidebar {
    max-width: 100vw; /* on sizes where it only is visible as an overlay */
  }
  #main-content-max-width {
    max-width: calc(min(100vw, 576px)); /* = bootstrap Medium/md */
  }
  /* show side bar content inline on small screens. */
  .sidenote {
    display: block; 	/* forces parent paragraph to break */
    float: none; 	/* stops content from floating */
    margin: 5% 10% 5% 10%;
    width: 80%;
    font-size: 80%;
  }
}

/* md and lg breakpoints: */
@media (min-width: 768px) {
  #toc-sidebar {
    max-width: 100vw; /* on sizes where it only is visible as an overlay */
  }
  #main-content-max-width {
    max-width: calc(min(100vw, 576px)); /* = bootstrap Medium/md */
  }
}

/* xl and xxl breakpoints: */
@media (min-width: 1200px) {
  #toc-sidebar {
    max-width: calc(min(25vw, 576px)); /* max 25% of screen */
  }
  #main-content-col:not(.without-tocsidebar) {
    max-width: calc(100vw - min(25vw, 576px));
  }
  #main-content-col .without-tocsidebar {
    max-width: 100vw;
  }
  #main-content-max-width {
    max-width: calc(min(75vw, 576px)); /* = bootstrap Medium/md */
  }
}